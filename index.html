<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Checkpoint Bot Queue Helper</title>
  <style>
    body {
      background: #111 url('https://drive.google.com/uc?id=1ZPVU1KYPWhEBInb2f_wiTxChUlaDbjBc') center/cover no-repeat;
      color: #fff; font-family: Arial, sans-serif; padding: 1em;
    }
    h1, h3 { text-align: center; }
    .center { text-align: center; }
    .button {
      background: #333; color: #fff; border: none; padding: 0.6em 1em;
      margin: 0.3em; border-radius: 6px; cursor: pointer;
    }
    .button:hover { background: #555; }
    .activity, .encounter {
      display: block; background: #222; margin: 0.3em auto;
      width: 90%; padding: 0.5em; border-radius: 5px; cursor: pointer;
    }
    #botSuggestions p {
      background: #222; margin: 0.3em; padding: 0.5em;
      border-radius: 5px;
    }
    #botSuggestions button {
      margin-left: 0.5em; background: #4CAF50; border: none; padding: 0.2em 0.5em; border-radius: 4px; color: white;
    }
  </style>
</head>
<body>
  <h1>Checkpoint Bot Queue Helper</h1>

  <div class="center">
    Bungie Name: <input id="bungiename" value="Guardian#1234" onkeyup="updateName()" />
  </div>

  <div class="center">
    <button class="button" onclick="setCategory('raids')">Raids</button>
    <button class="button" onclick="setCategory('dungeons')">Dungeons</button>
    <button class="button" onclick="setCategory('stories')">Stories/Other</button>
  </div>

  <div id="activities" class="center"></div>
  <div id="encounters" class="center"></div>
  <div class="center" style="margin-top:1em;">
    <p id="mainQueue">!queue</p>
    <button class="button" onclick="copyText('mainQueue')">Copy Main</button>
  </div>
  <div id="botSuggestions" style="margin-top:1em;"></div>

<script>
  const data = {
    raids: {
      "Duality": ['Chest1','Chest2','Boss','1(M)','2(M)','Boss(M)'],
      "Root of Nightmares": ['Chest1','Chest2','Nezarec','Scission(M)','Explicator(M)','Nezarec(M)'],
      "Vault of Glass": ['Confluxes','Post-Templar','Atheon'],
      "Deep Stone Crypt": ['Atraks-1','Chest2','Taniks'],
      "Garden of Salvation": ['Chest1','Sanctified'],
      "Vow of the Disciple": ['Chest1','Chest2'],
      "Last Wish": ['Shuro-Chi','Morgeth']
    },
    dungeons: {
      "Ghosts of the Deep": ['Chest1','Chest2','Boss'],
      "Prophecy": ['1','2','Boss'],
      "Shattered Throne": ['Boss'],
      "Pit of Heresy": ['Boss'],
      "Grasp of Avarice": ['Boss'],
      "Spire of the Watcher": ['1','2','Boss']
    },
    stories: {
      "Final Shape": ['Ascent','Dissent','Iconoclasm','Transmigration(M)','Temptation(M)','Exegesis(M)','Requiem(M)','Ascent(M)','Dissent(M)','Iconoclasm(M)'],
      "Lightfall": ['First Contact(M)','Under Siege(M)','Breakneck(M)','Desperate Measures(M)'],
      "Witch Queen": ['Arrival(M)','Investigation(M)','Ghosts(M)','Communion(M)','Mirror(M)','Cunning(M)','Last Chance(M)','Ritual(M)']
    }
  };

  const botCheckpoints = {
    "Discord": JSON.parse(JSON.stringify(data)),
    "TCT": JSON.parse(JSON.stringify(data)),
    "LB9": JSON.parse(JSON.stringify(data)),
    "GDB": JSON.parse(JSON.stringify(data)),
    "D2Checkpoints": JSON.parse(JSON.stringify(data)),
    "D2Chests": JSON.parse(JSON.stringify(data)),
    "DestinyCheckpoints": JSON.parse(JSON.stringify(data))
  };

  let selected = { category: "", activity: "", encounter: "", bungie: "Guardian#1234" };

  function updateName() {
    selected.bungie = document.getElementById('bungiename').value;
    updateMainQueue();
  }

  function setCategory(cat) {
    selected.category = cat;
    selected.activity = "";
    selected.encounter = "";
    let html = "<h3>Select Activity:</h3>";
    let sortedActs = Object.keys(data[cat]).sort();
    sortedActs.forEach(act => {
      html += `<button class="activity" onclick="setActivity('${act}')">${act}</button>`;
    });
    document.getElementById('activities').innerHTML = html;
    document.getElementById('encounters').innerHTML = "";
    updateMainQueue();
  }

  function setActivity(act) {
    selected.activity = act;
    selected.encounter = "";
    let html = "<h3>Select Encounter:</h3>";
    let encounters = data[selected.category][act];
    encounters.forEach(enc => {
      html += `<button class="encounter" onclick="setEncounter('${enc}')">${enc}</button>`;
    });
    document.getElementById('encounters').innerHTML = html;
    updateMainQueue();
  }

  function setEncounter(enc) {
    selected.encounter = enc;
    updateMainQueue();
  }

  function updateMainQueue() {
    let queue = `!queue ${selected.activity||'?'} ${selected.encounter||'?'} ${selected.bungie}`;
    document.getElementById('mainQueue').innerText = queue;

    let botsHtml = "<h3>Bot Suggestions:</h3>";
    for (let bot in botCheckpoints) {
      if (
        selected.activity && selected.encounter &&
        botCheckpoints[bot][selected.category] &&
        botCheckpoints[bot][selected.category][selected.activity] &&
        botCheckpoints[bot][selected.category][selected.activity].includes(selected.encounter)
      ) {
        const botQueue = `${bot}: ${queue}`;
        botsHtml += `<p>${botQueue} <button onclick="navigator.clipboard.writeText('${botQueue}')">Copy</button></p>`;
      }
    }
    document.getElementById('botSuggestions').innerHTML = botsHtml;
  }

  function copyText(id) {
    navigator.clipboard.writeText(document.getElementById(id).innerText);
    alert('Copied to clipboard!');
  }
</script>
</body>
</html>
